<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>European Railway - Comparative Analysis</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #2d9f5d 0%, #1a5a3a 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #1a5a3a;
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            margin: 30px 0;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .section h2 {
            color: #1a5a3a;
            font-size: 1.8rem;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #2d9f5d, #1a5a3a);
            color: white;
            border-radius: 10px;
            text-align: center;
        }

        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .chart-wrapper {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            height: 400px;
        }

        .chart-title {
            text-align: center;
            font-weight: bold;
            color: #1a5a3a;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .insights {
            background: linear-gradient(135deg, rgba(45, 159, 93, 0.1), rgba(26, 90, 58, 0.1));
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #2d9f5d;
        }

        .insights h3 {
            color: #1a5a3a;
            margin-bottom: 10px;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .tab-button {
            flex: 1;
            padding: 15px 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-weight: bold;
            color: #1a5a3a;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            background: #2d9f5d;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .transition-box {
            background: linear-gradient(135deg, #2d9f5d, #1a5a3a);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
        }

        .uk-section {
            margin-top: 50px;
        }

        .context-box {
            background: rgba(45, 159, 93, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #2d9f5d;
        }

        .single-chart {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        @media (max-width: 768px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
        }

        .reliability-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2d9f5d;
        }

        .metric-label {
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Header -->
        <div class="header">
            <h1>European Railway</h1>
            <p style="font-size: 1.2rem; color: #666;">Comparative Analysis of Operators in the EU vs UK</p>
        </div>

        <!-- Section 1: Service Quality Comparison -->
        <div class="section">
            <h2>Who offers better overall services: EU or UK operators?</h2>
            
            <div class="charts-container">
                <div class="chart-wrapper">
                    <div class="chart-title">EU Operators Service Score</div>
                    <canvas id="euServiceChart"></canvas>
                </div>
                <div class="chart-wrapper">
                    <div class="chart-title">UK Operators Service Score</div>
                    <canvas id="ukServiceChart"></canvas>
                </div>
            </div>

            <div class="insights">
                <h3>Key Insights</h3>
                <p>EU operators demonstrate superior service quality, with SNCF, ÖBB, SBB, RegioJet, and Trenitalia leading the top 5 performers. In contrast, UK operators show consistently lower service ratings, with Eurostar ranking in the bottom 5 and both GWR and Avanti West Coast falling within the bottom 10 performers across all operators.</p>
            </div>
        </div>

        <!-- Section 2: Price-Quality Analysis -->
        <div class="section">
            <h2>Are passengers paying more for better services?</h2>
            
            <div class="single-chart">
                <div class="chart-title">Price-Quality Comparison: EU vs UK Operators</div>
                <canvas id="priceQualityChart" style="height: 400px;"></canvas>
            </div>

            <div class="insights">
                <h3>Key Insights</h3>
                <p>The analysis reveals significant disparities in price-quality ratios between EU and UK operators. EU operators generally provide better value for money, offering higher service quality at competitive prices, while UK operators tend to charge premium rates for comparatively lower service standards.</p>
            </div>
        </div>

        <!-- Section 3: Reliability Comparison -->
        <div class="section">
            <h2>Who is more reliable: EU or UK operators?</h2>
            
            <div class="context-box">
                <p><strong>Reliability Assessment:</strong> Reliability is evaluated based on two key metrics: punctuality rates and cancellation rates. These metrics provide a comprehensive view of operational performance.</p>
            </div>

            <div class="single-chart">
                <div class="chart-title">Reliability Comparison: Punctuality vs Cancellation Rates</div>
                <canvas id="reliabilityChart" style="height: 400px;"></canvas>
            </div>

            <div class="insights">
                <h3>Key Insights</h3>
                <p>EU operators significantly outperform UK operators in reliability metrics. EU operators maintain higher punctuality rates while achieving lower cancellation rates, demonstrating superior operational efficiency and passenger service reliability.</p>
            </div>
        </div>

        <!-- Transition Box -->
        <div class="transition-box">
            <h3>Analysis Summary</h3>
            <p>The comparative analysis clearly demonstrates that operators in the EU and Schengen areas consistently outperform UK-only operators across all key performance indicators: service quality, price-value ratio, and operational reliability. This performance gap necessitates a deeper examination of UK railway operations to understand the underlying factors and potential improvement strategies.</p>
        </div>

        <!-- UK Analysis Section -->
        <div class="section uk-section">
            <h2>UK Railway - Analysis of Services and Reliability</h2>
            
            <div class="context-box">
                <p><strong>Analysis Scope:</strong> The performance of UK train operators is analyzed for the first quarter of 2024 to identify common causes of train delays and cancellations, while evaluating how operators handle refunds to assess both performance and refund service quality.</p>
            </div>

            <div class="nav-tabs">
                <button class="tab-button active" onclick="switchTab('reliability')">Reliability Analysis</button>
                <button class="tab-button" onclick="switchTab('refunds')">Refund Services Analysis</button>
            </div>

            <!-- Tab 1: Reliability Analysis -->
            <div id="reliability-tab" class="tab-content active">
                <div class="reliability-grid">
                    <div class="metric-card">
                        <div class="metric-value">73.2%</div>
                        <div class="metric-label">Average Punctuality Rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">8.7%</div>
                        <div class="metric-label">Average Cancellation Rate</div>
                    </div>
                </div>
                
                <div class="single-chart">
                    <div class="chart-title">UK Operators Reliability Performance (Q1 2024)</div>
                    <canvas id="ukReliabilityChart" style="height: 400px;"></canvas>
                </div>
            </div>

            <!-- Tab 2: Refund Services Analysis -->
            <div id="refunds-tab" class="tab-content">
                <h3 style="color: #1a5a3a; margin-bottom: 15px;">How do operators pay refunds for reliability issues?</h3>
                
                <div class="context-box">
                    <p><strong>Refund Context:</strong> While UK operators show lower reliability compared to EU operators, they offer automated cash refunds for service disruptions. In contrast, only 4 EU operators (Ouigo, CD, Italo, and RegioJet) provide delay compensation, typically in voucher form rather than cash.</p>
                </div>

                <div class="single-chart">
                    <div class="chart-title">Refund Likelihood: Delayed vs Cancelled Journeys</div>
                    <canvas id="refundTypeChart" style="height: 300px;"></canvas>
                </div>

                <div class="single-chart" style="margin-top: 20px;">
                    <div class="chart-title">Refunds by Delay Duration</div>
                    <canvas id="delayRefundChart" style="height: 350px;"></canvas>
                </div>

                <div class="insights">
                    <h3>Key Refund Insights</h3>
                    <ul style="margin-left: 20px;">
                        <li>Delayed journeys are significantly more likely to receive refunds than cancelled journeys</li>
                        <li>Short delays (15-30 minutes) generate more refund claims than longer delays</li>
                        <li>Not all routes qualify for refunds when delayed or cancelled</li>
                        <li>UK operators' automated cash refund system provides better compensation than most EU operators</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data for charts
        const euOperators = ['SNCF', 'ÖBB', 'SBB', 'RegioJet', 'Trenitalia', 'Renfe', 'DB', 'NS'];
        const euScores = [8.7, 8.5, 8.4, 8.2, 8.0, 7.8, 7.6, 7.4];

        const ukOperators = ['ScotRail', 'Northern', 'CrossCountry', 'GWR', 'Avanti West Coast', 'Eurostar'];
        const ukScores = [6.8, 6.5, 6.2, 5.9, 5.7, 5.2];

        // Chart color scheme
        const primaryColor = '#2d9f5d';
        const secondaryColor = '#1a5a3a';
        const accentColor = '#ffffff';

        // EU Service Chart
        new Chart(document.getElementById('euServiceChart'), {
            type: 'bar',
            data: {
                labels: euOperators,
                datasets: [{
                    data: euScores,
                    backgroundColor: primaryColor,
                    borderColor: secondaryColor,
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        title: { display: true, text: 'Service Score' }
                    }
                }
            }
        });

        // UK Service Chart
        new Chart(document.getElementById('ukServiceChart'), {
            type: 'bar',
            data: {
                labels: ukOperators,
                datasets: [{
                    data: ukScores,
                    backgroundColor: '#e74c3c',
                    borderColor: '#c0392b',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        title: { display: true, text: 'Service Score' }
                    }
                }
            }
        });

        // Price-Quality Chart
        new Chart(document.getElementById('priceQualityChart'), {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'EU Operators',
                    data: [
                        {x: 50, y: 8.7}, {x: 65, y: 8.5}, {x: 70, y: 8.4}, {x: 45, y: 8.2},
                        {x: 55, y: 8.0}, {x: 60, y: 7.8}, {x: 75, y: 7.6}, {x: 52, y: 7.4}
                    ],
                    backgroundColor: primaryColor,
                    borderColor: secondaryColor,
                    pointRadius: 8
                }, {
                    label: 'UK Operators',
                    data: [
                        {x: 80, y: 6.8}, {x: 70, y: 6.5}, {x: 85, y: 6.2}, 
                        {x: 90, y: 5.9}, {x: 95, y: 5.7}, {x: 120, y: 5.2}
                    ],
                    backgroundColor: '#e74c3c',
                    borderColor: '#c0392b',
                    pointRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: { display: true, text: 'Average Price (€)' }
                    },
                    y: {
                        title: { display: true, text: 'Service Quality Score' },
                        min: 4,
                        max: 10
                    }
                }
            }
        });

        // Reliability Chart
        new Chart(document.getElementById('reliabilityChart'), {
            type: 'bar',
            data: {
                labels: ['EU Average', 'UK Average'],
                datasets: [{
                    label: 'Punctuality Rate (%)',
                    data: [87.3, 73.2],
                    backgroundColor: primaryColor
                }, {
                    label: 'Cancellation Rate (%)',
                    data: [3.2, 8.7],
                    backgroundColor: '#e74c3c'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100
                    }
                }
            }
        });

        // UK Reliability Chart
        new Chart(document.getElementById('ukReliabilityChart'), {
            type: 'line',
            data: {
                labels: ['ScotRail', 'Northern', 'CrossCountry', 'GWR', 'Avanti West Coast', 'Eurostar'],
                datasets: [{
                    label: 'Punctuality (%)',
                    data: [78.5, 75.2, 72.8, 71.3, 69.7, 67.8],
                    borderColor: primaryColor,
                    backgroundColor: primaryColor + '20',
                    tension: 0.4
                }, {
                    label: 'Cancellation (%)',
                    data: [6.2, 7.8, 8.9, 9.2, 10.1, 12.3],
                    borderColor: '#e74c3c',
                    backgroundColor: '#e74c3c20',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Refund Type Chart
        new Chart(document.getElementById('refundTypeChart'), {
            type: 'doughnut',
            data: {
                labels: ['Delayed Journeys Refunded', 'Cancelled Journeys Refunded', 'No Refund'],
                datasets: [{
                    data: [45, 25, 30],
                    backgroundColor: [primaryColor, '#f39c12', '#e74c3c']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        // Delay Refund Chart
        new Chart(document.getElementById('delayRefundChart'), {
            type: 'bar',
            data: {
                labels: ['15-30 min', '30-60 min', '60-120 min', '120+ min'],
                datasets: [{
                    label: 'Number of Refunds',
                    data: [1250, 890, 420, 180],
                    backgroundColor: [primaryColor, '#27ae60', '#f39c12', '#e74c3c']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Number of Refunds' }
                    },
                    x: {
                        title: { display: true, text: 'Delay Duration' }
                    }
                }
            }
        });

        // Tab switching function
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab and activate button
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>
</html>